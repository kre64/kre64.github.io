(this.webpackJsonpsurvive=this.webpackJsonpsurvive||[]).push([[0],{11:function(e,t,a){e.exports=a(19)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),n=a(5),r=a.n(n),l=(a(16),a(2)),c=a.n(l),h=(a(17),a(6)),o=a(7),d=a(9),p=a(8),v=a(1),u=a(10),m=(a(18),a(3));var y=function(e){var t=e.game,a=Object(s.useState)(0),n=Object(m.a)(a,2),r=n[0],l=n[1],c=Object(s.useState)("00:00:00"),h=Object(m.a)(c,2),o=h[0],d=h[1];function p(e){var t=e.toFixed(0)+"";return t.length<2?"0"+t:t}return Object(s.useEffect)((function(){var e=null;return t?e=setInterval((function(){var e=p(r%60),t=p(parseInt(r/60)),a=p(parseInt(t/60)),s="".concat(a,":").concat(t,":").concat(e);l((function(e){return e+1})),d((function(e){return s}))}),1e3):t||0===r||clearInterval(e),function(){return clearInterval(e)}}),[r]),i.a.createElement("div",{className:"wrapper"},t?i.a.createElement("div",{className:"timer",id:"timer"},o):"")},g=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).intervalID=0,a.state={gameActive:!1,gameOver:!1,playerWidth:30,playerHeight:30,playerX:0,playerY:0,playerSpeedX:0,playerSpeedY:0,obstacles:[],time:0},a.handleClick=a.handleClick.bind(Object(v.a)(a)),a.handleKeyPress=a.handleKeyPress.bind(Object(v.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.drawStart(),this.drawTutorial()}},{key:"updateObstacles",value:function(){var e=document.getElementById("game-canvas"),t=this.state.obstacles;this.state.time%1e4===2500?(t.push(this.addObstacle()),this.setState({obstacles:t})):t.forEach((function(t){t.x>=e.width-t.obstacleW&&(t.obstacleSpeedX=-3),t.x<=5&&(t.obstacleSpeedX=3),t.y>=e.height&&(t.obstacleSpeedY=-3),t.y<=0&&(t.obstacleSpeedY=3),t.x+=t.obstacleSpeedX,t.y+=t.obstacleSpeedY}))}},{key:"addObstacle",value:function(){var e=document.getElementById("game-canvas");return{x:Math.random()*e.width/2+e.width/2-this.state.playerX,y:Math.random()*e.height/2+e.height/2-this.state.playerX,obstacleW:30,obstacleH:30,obstacleSpeedX:3*Math.random()-1,obstacleSpeedY:3*Math.random()-1}}},{key:"draw",value:function(){var e=document.getElementById("game-canvas"),t=this.refs.canvas.getContext("2d");t.clearRect(0,0,e.width,e.height),this.setState({playerX:this.state.playerX+this.state.playerSpeedX,playerY:this.state.playerY+this.state.playerSpeedY}),this.updateObstacles(),this.collision();var a=this.state.playerX,s=this.state.playerY;t.fillRect(a,s,this.state.playerWidth,this.state.playerHeight),this.state.obstacles.forEach((function(e){t.fillRect(e.x,e.y,e.obstacleW,e.obstacleH)}))}},{key:"drawStart",value:function(){var e=document.getElementById("game-canvas"),t=this.refs.canvas.getContext("2d");t.fillStyle="white",t.fillRect(e.width/2-this.state.playerWidth/2,e.height/2-this.state.playerHeight/2,this.state.playerWidth,this.state.playerHeight),this.setState({playerX:e.width/2-this.state.playerWidth/2,playerY:e.height/2-this.state.playerHeight/2,playerSpeedY:0,playerSpeedX:0,gameActive:!1,gameOver:!1})}},{key:"drawTutorial",value:function(){var e=document.getElementById("game-canvas"),t=this.refs.canvas.getContext("2d");t.font="32px Libre Baskerville",t.fillStyle="white",t.textAlign="center",t.fillText("WASD is MOVE",e.width/2,e.height/2-50)}},{key:"startGame",value:function(){var e=this;this.intervalID=setInterval((function(){e.draw(),e.setState({gameActive:!0,gameOver:!1,time:e.state.time+10})}),10)}},{key:"endGame",value:function(){clearInterval(this.intervalID);var e=document.getElementById("timer").innerHTML;alert("Game Over\nTime Survived: ".concat(e)),this.setState({obstacles:[]}),this.drawStart(),this.startGame()}},{key:"collisionWithObstacle",value:function(){for(var e=this.state.obstacles,t=!1,a=0;a<e.length;a++){var s=this.state.playerX,i=this.state.playerY,n=Math.floor(e[a].x),r=Math.floor(e[a].y),l=Math.floor(e[a].obstacleW);t=n<=s&&s<=n+l&&r<=i&&i<=r+l}return t}},{key:"collision",value:function(){var e=document.getElementById("game-canvas");return this.state.playerX>=e.width-20||this.state.playerX<=0||this.state.playerY>=e.height-20||this.state.playerY<=0?this.endGame():this.collisionWithObstacle()&&this.endGame(),!1}},{key:"updatePlayer",value:function(e){switch(e.preventDefault(),e.key){case"w":case"ArrowUp":this.setState({playerSpeedY:-2,playerSpeedX:0});break;case"a":case"ArrowLeft":this.setState({playerSpeedY:0,playerSpeedX:-2});break;case"s":case"ArrowDown":this.setState({playerSpeedY:2,playerSpeedX:0});break;case"d":case"ArrowRight":this.setState({playerSpeedY:0,playerSpeedX:2})}if(void 0===e.touches);else{var t=e.touches[0].clientX,a=e.touches[0].clientY;t<150&&a<550&&a>450?this.setState({playerSpeedY:0,playerSpeedX:-2}):t>150&&a<550&&a>450?this.setState({playerSpeedY:0,playerSpeedX:2}):a<400?this.setState({playerSpeedY:-2,playerSpeedX:0}):a>400&&this.setState({playerSpeedY:2,playerSpeedX:0})}}},{key:"handleKeyPress",value:function(e){(this.state.gameActive||this.state.gameOver)&&this.updatePlayer(e)}},{key:"handleClick",value:function(e){this.state.gameActive?this.state.gameActive&&this.state.gameOver:(this.startGame(),this.setState({gameActive:!0}))}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"wrapper"},this.state.gameActive?i.a.createElement(y,{game:!0}):i.a.createElement("div",{className:"timer"},"\xa0")),i.a.createElement("div",null,i.a.createElement("canvas",{width:this.props.width,height:this.props.height,ref:"canvas",id:"game-canvas",className:"game-canvas",tabIndex:"0",onClick:function(t){e.handleClick(t.nativeEvent)},onKeyDown:function(t){e.handleKeyPress(t.nativeEvent)},onTouchStart:function(t){e.handleKeyPress(t.nativeEvent)}})))}}]),t}(s.Component);var f=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"wrapper"},i.a.createElement("h1",{className:"main-title wrapper"},"survive")),i.a.createElement("div",{className:"content"},i.a.createElement(c.a,{minDeviceWidth:1224},i.a.createElement(g,{width:800,height:800})),i.a.createElement(c.a,{maxDeviceWidth:1224},i.a.createElement(g,{width:350,height:567}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.cc514f0b.chunk.js.map